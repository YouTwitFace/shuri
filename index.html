<!DOCTYPE html>
<html>
	<head>
		<title>Shuri</title>
        <meta name="viewport" content="width=device-width,initial-scale=1.0">
        <link rel="stylesheet" href="bootstrap.min.css">
        <link rel="stylesheet" href="styles.css">
	</head>
	<body>
        <div class="container">
            <div class="v-center w-30-p text-center">
                <h1 class="title">Shuri</h1>

                <div class="shorten">
                    <input type="url" class="url form-control align-middle d-inline-block" placeholder="Long URL">
                    <button class="btn btn-primary">Shorten</button>
                </div>

                <div class="result">
                    <a class="short-url form-control d-inline-block"></a>
                </div>
            </div>
        </div>

    	<script>
            const input = document.querySelector(`.url`);
            const btn = document.querySelector(`.btn`);

            btn.addEventListener(`click`, () => {
                const url = input.value;

                if (url.match(/^(https?:\/\/)?\S*?\.\S*?$/)) {
                    fetch(`api.php`, {
                        method: `POST`,
                        body: JSON.stringify({ url }),
                    })
                        .then(res => res.json())
                        .then(res => {
                            if (res.ok) {
                                document.write(res.short_url);
                            }
                        });
                } else {
                    alert(`Invalid url.`);
                }
            });
    	</script>
	</body>
</html>
